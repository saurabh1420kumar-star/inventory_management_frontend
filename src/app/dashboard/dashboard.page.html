<!-- src/app/pages/nexus-dashboard/nexus-dashboard.page.html -->
<ion-header>
  <ion-toolbar color="light">
    <ion-title>Dashboard</ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon slot="icon-only" name="notifications-outline"></ion-icon>
      </ion-button>

      <ion-button (click)="logout()">
        <ion-icon slot="start" name="log-out-outline"></ion-icon>
        Logout
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar color="light">
    <ion-title size="small">
      Welcome back, {{ currentUser.name }} ({{ currentUser.role }})
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="dashboard-wrapper">
    <!-- Stats cards -->
    <ion-grid>
      <ion-row>
        <ion-col
          size="12"
          sizeSm="6"
          sizeLg="3"
          *ngFor="let stat of statsCards"
        >
          <ion-card>
            <ion-card-content>
              <div class="stat-header">
                <div>
                  <p class="stat-label">{{ stat.label }}</p>
                  <h3 class="stat-value">{{ stat.value }}</h3>
                  <p
                    class="stat-change"
                    [ngClass]="{
                      up: stat.changeType === 'up',
                      down: stat.changeType === 'down'
                    }"
                  >
                    <ion-icon
                      [name]="
                        stat.changeType === 'up'
                          ? 'arrow-up-outline'
                          : 'arrow-down-outline'
                      "
                    ></ion-icon>
                    {{ stat.change }}
                  </p>
                </div>
                <div class="stat-icon">
                  <ion-icon [name]="stat.icon"></ion-icon>
                </div>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Middle section: revenue / inventory (simple placeholder layout) -->
    <ion-grid>
      <ion-row>
        <!-- Revenue placeholder -->
        <ion-col size="12" sizeLg="8">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Revenue Overview</ion-card-title>
              <ion-card-subtitle>
                Monthly revenue for the current year
              </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <p class="muted">
                Chart placeholder â€“ integrate Chart.js / ngx-charts later if you
                want real graphs.
              </p>
              <ion-list>
                <ion-item *ngFor="let stat of statsCards">
                  <ion-label>
                    <h3>{{ stat.label }}</h3>
                    <p>{{ stat.value }} ({{ stat.change }})</p>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <!-- Inventory distribution -->
        <ion-col size="12" sizeLg="4">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Inventory Distribution</ion-card-title>
              <ion-card-subtitle>By category</ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <ion-list>
                <ion-item *ngFor="let item of inventoryData">
                  <ion-label>
                    <h3>{{ item.name }}</h3>
                    <p>{{ item.value }} units</p>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Recent Orders -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Recent Orders</ion-card-title>
        <ion-card-subtitle>Latest inventory transactions</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <div class="table-wrapper">
          <table class="orders-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Product</th>
                <th>Quantity</th>
                <th>Status</th>
                <th class="text-right">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let order of recentOrders">
                <td>{{ order.id }}</td>
                <td>{{ order.product }}</td>
                <td>{{ order.quantity }}</td>
                <td>
                  <span [ngClass]="getStatusChipClass(order.status)">
                    {{ order.status }}
                  </span>
                </td>
                <td class="text-right">{{ order.amount }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
